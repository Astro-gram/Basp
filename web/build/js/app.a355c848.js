(function(){var e={5238:function(e,t,n){n(7658);const{dataTypes:o}=n(5147);function r(e){return new e.IBuiltInFunctionNode(o.Null,"push",[{type:o.Any,name:"newElement"}],(t=>{const n=e.IBuiltInFunctionNode.getArg("value",t),o=e.IBuiltInFunctionNode.getArg("newElement",t),r=Object.assign(Object.create(Object.getPrototypeOf(o)),o);n.elements.push(r),n.value=n.getValue(n.elements)}))}function s(e){return new e.IBuiltInFunctionNode(o.Null,"pop",[],(t=>{const n=e.IBuiltInFunctionNode.getArg("value",t);n.elements.pop(),n.value=n.getValue(n.elements)}))}e.exports={push:r,pop:s}},5267:function(e,t,n){const{IBuiltInFunctionNode:o,INumberNode:r,IStringNode:s}=n(4667),{dataTypes:i}=n(5147);function u(){return new o(i.Number,"Number",[{type:i.String,name:"s"}],((e,t)=>{const n=o.getArg("s",e);return new r(Number(n.stripQuotes(n.value)),i.Number,n.position,t)}))}function l(){return new o(i.String,"String",[{type:i.Any,name:"v"}],((e,t)=>{const n=o.getArg("v",e);return new s(`"${n.value}"`,i.String,n.position,t)}))}e.exports={StringType:l,NumberType:u}},3998:function(e,t,n){const{dataTypes:o}=n(5147),{IBuiltInFunctionNode:r,INumberNode:s,IStringNode:i,IStructNode:u}=n(4667);function l(){return new r(o.Number,"Floor",[{type:o.Any,name:"v"}],((e,t)=>{const n=r.getArg("v",e);return new s(Math.floor(n.value),o.Number,n.position,t)}))}function a(){return new r(o.Number,"Ceil",[{type:o.Any,name:"v"}],((e,t)=>{const n=r.getArg("v",e);return new s(Math.ceil(n.value),o.Number,n.position,t)}))}function c(){return new r(o.Number,"Round",[{type:o.Any,name:"v"}],((e,t)=>{const n=r.getArg("v",e);return new s(Math.round(n.value),o.Number,n.position,t)}))}function d(){return new r(o.Number,"Abs",[{type:o.Any,name:"v"}],((e,t)=>{const n=r.getArg("v",e);return new s(Math.abs(n.value),o.Number,n.position,t)}))}function p(){return new r(o.Number,"Sqrt",[{type:o.Any,name:"v"}],((e,t)=>{const n=r.getArg("v",e);return new s(Math.sqrt(n.value),o.Number,n.position,t)}))}function h(){return new r(o.Number,"Random",[],((e,t)=>new s(Math.random(),o.Number,null,t)))}function y(){const e=[{name:"Floor",value:l(),writable:!1},{name:"Ceil",value:a(),writable:!1},{name:"Round",value:c(),writable:!1},{name:"Abs",value:d(),writable:!1},{name:"Sqrt",value:p(),writable:!1},{name:"Random",value:h(),writable:!1}],t=[{name:"PI",value:new s(Math.PI,o.Number),writable:!1}];return new u("Math",e.concat(t),o.Struct)}e.exports={getMath:y}},7256:function(e,t,n){const{IBuiltInFunctionNode:o,INumberNode:r,IStringNode:s}=n(4667),{dataTypes:i}=n(5147);function u(){return new o(i.Null,"Print",[{type:i.Any,name:"i"}],((e,t)=>{const n=o.getArg("i",e);t.global.apiCaller.call(n.value,"print")}))}function l(){return new o(i.Null,"Clear",[],((e,t)=>{t.global.apiCaller.call(null,"clear")}))}e.exports={Print:u,Clear:l}},936:function(e,t,n){const{dataTypes:o}=n(5147);function r(e){return new e.IBuiltInFunctionNode(o.String,"toUpperCase",[],((t,n)=>{const r=e.IBuiltInFunctionNode.getArg("value",t);return new e.IStringNode(r.value.toUpperCase(),o.String,r.position,n)}))}function s(e){return new e.IBuiltInFunctionNode(o.String,"toLowerCase",[],((t,n)=>{const r=e.IBuiltInFunctionNode.getArg("value",t);return new e.IStringNode(r.value.toLowerCase(),o.String,r.position,n)}))}function i(e){return new e.IBuiltInFunctionNode(o.Array,"split",[{type:o.String,name:"delimiter"}],((t,n)=>{const r=e.IBuiltInFunctionNode.getArg("value",t),s=e.IBuiltInFunctionNode.getArg("delimiter",t);return new e.IArrayNode(r.stripQuotes(r.value).split(s.stripQuotes(s.value)).map((t=>new e.IStringNode(`"${t}"`,o.String,r.position,n))),o.Array,r.position,n)}))}e.exports={toUpperCase:r,toLowerCase:s,split:i}},91:function(e,t,n){const{IBuiltInFunctionNode:o,IBooleanNode:r,IStringNode:s}=n(4667),{dataTypes:i}=n(5147);function u(){return new o(i.Bool,"IsArray",[{type:i.Any,name:"a"}],((e,t)=>{const n=o.getArg("a",e);return new r(n.type===i.Array?"True":"False",i.Bool,n.position,t)}))}function l(){return new o(i.Bool,"IsNumber",[{type:i.Any,name:"n"}],((e,t)=>{const n=o.getArg("n",e);return new r(n.type===i.Number?"True":"False",i.Bool,n.position,t)}))}function a(){return new o(i.Bool,"IsString",[{type:i.Any,name:"s"}],((e,t)=>{const n=o.getArg("s",e);return new r(n.type===i.String?"True":"False",i.Bool,n.position,t)}))}function c(){return new o(i.Bool,"IsEnum",[{type:i.Any,name:"e"}],((e,t)=>{const n=o.getArg("e",e);return new r(n.type===i.Enum?"True":"False",i.Bool,n.position,t)}))}function d(){return new o(i.Bool,"IsBoolean",[{type:i.Any,name:"b"}],((e,t)=>{const n=o.getArg("b",e);return new r(n.type===i.Bool?"True":"False",i.Bool,n.position,t)}))}function p(){return new o(i.Bool,"IsFunction",[{type:i.Any,name:"f"}],((e,t)=>{const n=o.getArg("f",e);return new r(n.type===i.Function?"True":"False",i.Bool,n.position,t)}))}function h(){return new o(i.String,"Typeof",[{type:i.Any,name:"i"}],((e,t)=>{const n=o.getArg("i",e);return new s(`"${n.type}"`,i.String,n.position,t)}))}e.exports={IsArray:u,IsNumber:l,IsString:a,IsEnum:c,IsBoolean:d,IsFunction:p,Typeof:h}},6364:function(e,t,n){const{NumberType:o,StringType:r}=n(5267),{Print:s,Clear:i}=n(7256),{IsArray:u,IsNumber:l,IsString:a,IsEnum:c,IsBoolean:d,IsFunction:p,Typeof:h}=n(91),{getMath:y}=n(3998);e.exports={NumberType:o,StringType:r,Print:s,Clear:i,IsArray:u,IsNumber:l,IsString:a,IsEnum:c,IsBoolean:d,IsFunction:p,Typeof:h,getMath:y}},5147:function(e){const t={NEWLINE:"NEWLINE",COMMENT:"COMMENT",NUMBER:"NUMBER",STRING:"STRING",BOOL:"BOOL",ADD_EQ:"ADD_EQ",ADD:"ADD",SUB_EQ:"SUB_EQ",SUB:"SUB",MUL_EQ:"MUL_EQ",MUL:"MUL",DIV_EQ:"DIV_EQ",DIV:"DIV",POW_EQ:"POW_EQ",POW:"POW",MOD_EQ:"MOD_EQ",MOD:"MOD",LSQUARE:"LSQUARE",RSQUARE:"RSQUARE",LBRACKET:"LBRACKET",RBRACKET:"RBRACKET",EQ:"EQ",NEQ:"NEQ",NOT:"NOT",AND:"AND",OR:"OR",GTE:"GTE",LTE:"LTE",GT:"GT",LT:"LT",LPAR:"LPAR",RPAR:"RPAR",DOT:"DOT",COMMA:"COMMA",COLON:"COLON",ASSIGN:"ASSIGN",TYPE:"TYPE",KEYWORD:"KEYWORD",IDENTIFIER:"IDENTIFIER",EOF:"EOF"},n=[[t.NEWLINE,/\n/],[t.COMMENT,/\/\//],[t.NUMBER,/^\d*$/],[t.STRING,/(["'])(?:(?=(\\?))\2.)*?\1/],[t.BOOL,/^True$|^False$/],[t.ADD_EQ,/^\+=$/],[t.ADD,/^\+$/],[t.SUB_EQ,/^\-=$/],[t.SUB,/^\-$/],[t.MUL_EQ,/^\*=$/],[t.MUL,/^\*$/],[t.DIV_EQ,/^\/=$/],[t.DIV,/^\/$/],[t.POW_EQ,/^\^=$/],[t.POW,/^\^$/],[t.MOD_EQ,/^\%=$/],[t.MOD,/^\%$/],[t.LSQUARE,/^\[$/],[t.RSQUARE,/^\]$/],[t.LBRACKET,/^\{$/],[t.RBRACKET,/^\}$/],[t.EQ,/^==$/],[t.NEQ,/^!=$/],[t.NOT,/^!$/],[t.AND,/^&$/],[t.OR,/^~$/],[t.GTE,/^>=$/],[t.LTE,/^<=$/],[t.GT,/^>$/],[t.LT,/^<$/],[t.LPAR,/^\($/],[t.RPAR,/^\)$/],[t.DOT,/^\.$/],[t.COMMA,/^,$/],[t.COLON,/^:$/],[t.ASSIGN,/^\=$/],[t.TYPE,/^string$|^int$|^bool$|^array$|^enum$|^struct$/],[t.KEYWORD,/^return$|^break$|^continue$|^fn$|^if$|^else$|^elif$|^for$|^in$|^while$|^new$/],[t.IDENTIFIER,/[\s\S]*/]],o={Number:"NUMBER",String:"STRING",Bool:"BOOL",Array:"ARRAY",Enum:"ENUM",EnumValue:"ENUM_VALUE",Struct:"STRUCT",Function:"FUNCTION",Null:"NULL",Any:"ANY"},r=["add_eq","sub_eq","mul_eq","div_eq","mod_eq","assign"];e.exports={lexerRules:n,dataTypes:o,assignmentOperators:r,tokenTypes:t}},6044:function(e,t,n){var o=n(4344)["default"];class r{constructor(e,t,n,o=null){this.position=e,this.context=o,this.error=t,this.details=n}toString(){const e=`${this.error} Error: ${this.details}`;let t=void 0===this.position?"<unknown>":this.position.toString();const n=this.getStack(t),o="=".repeat(Math.max(e.length,t.length,n.longestLine));return`\n${o}\n${e}\n    at ${n.stack}\n${o}\n        `}getStack(e){let t={longestLine:0,stack:e};if(null===this.context)return t;let n=this.context.clone();t.stack+="\n\tin "+this.context.displayName;while(null!==n.parent)t.stack+="\n\tin "+n.parent.displayName,n=n.parent;return t}}o(r,"InvalidSyntaxError","Invalid Syntax"),o(r,"TypeError","Type"),o(r,"UnknownError","Unknown"),o(r,"RuntimeError","Runtime"),o(r,"IndexOutOfBoundsError","Index Out Of Bounds"),o(r,"InternalError","Internal"),e.exports={Error:r}},4667:function(e,t,n){var o=n(4344)["default"];n(7658);const{dataTypes:r}=n(5147),{Error:s}=n(6044),{toUpperCase:i,toLowerCase:u,split:l}=n(936),{push:a,pop:c}=n(5238);class d{constructor(e,t,n,o=null,r=null,s={},i={}){this.value=e,this.type=t,this.nodeType=n,this.position=o,this.context=r,this.properties=s,this.methods=i,this.parent=null}toString(){return`<INode ${this.nodeType}>`}}o(d,"INumberNode","INumberNode"),o(d,"IStringNode","IStringNode"),o(d,"IBooleanNode","IBooleanNode"),o(d,"IArrayNode","IArrayNode"),o(d,"IEnumNode","IEnumNode"),o(d,"IEnumValueNode","IEnumValueNode"),o(d,"IStructNode","IStructNode"),o(d,"IBaseStructNode","IBaseStructNode"),o(d,"IFunctionNode","IFunctionNode"),o(d,"IBuiltInFunctionNode","IBuiltInFunctionNode"),o(d,"IMultiResultNode","IMultiResultNode"),o(d,"IForceControlNode","IForceControlNode"),o(d,"IReturnNode","IReturnNode");class p extends d{constructor(e,t,n=null,o=null){super(Number(e),t,d.INumberNode,n,o)}add(e){if(e instanceof p)return new p(this.value+e.value,this.type,this.position,this.context)}sub(e){if(e instanceof p)return new p(this.value-e.value,this.type,this.position,this.context)}mul(e){if(e instanceof p)return new p(this.value*e.value,this.type,this.position,this.context)}div(e){if(e instanceof p)return 0===e.value?new s(e.position,s.RuntimeError,"Can't divide by 0",this.context):new p(this.value/e.value,this.type,this.position,this.context)}pow(e){if(e instanceof p)return new p(this.value**e.value,this.type,this.position,this.context)}mod(e){if(e instanceof p)return new p(this.value%e.value,this.type,this.position,this.context)}}class h extends d{constructor(t,n,o=null,s=null){super(t,n,d.IStringNode,o,s),this.properties={length:()=>new p(this.value.length-2,r.Number,this.position)},this.methods={toUpperCase:i(e.exports),toLowerCase:u(e.exports),split:l(e.exports)}}add(e){if(e instanceof h)return new h(`"${this.stripQuotes(this.value)}${this.stripQuotes(e.value)}"`,this.type,this.position,this.context)}index(e){const t=this.stripQuotes(this.value)[e];return void 0===t?t:new h(`"${t}"`,this.type,this.position,this.context)}stripQuotes(e){return e.replace(/"/g,"")}}class y extends d{constructor(e,t,n=null,o=null){super(e,t,d.IBooleanNode,n,o)}}class k extends d{constructor(t,n,o=null,s=null){super(b(t),n,d.IArrayNode,o,s),this.methods={push:a(e.exports),pop:c(e.exports)},this.properties={length:()=>new p(this.elements.length,r.Number,this.position)},this.elements=t,this.getValue=b}}class f extends d{constructor(e,t,n=null,o=null){super(R(e),t,d.IEnumNode,n,o),this.elements=e.map((e=>new T(e,r.EnumValue,n,o))),this.getValue=R}}class T extends d{constructor(e,t,n=null,o=null){super(e,t,d.IEnumValueNode,n,o)}wrap(){return new f([this.value],r.Enum,this.position,this.context)}}class N extends d{constructor(e,t,n,o=null,r=null){super(S(e,t),n,d.IBaseStructNode,o,r),this.name=e,this.structure=t}}class v extends d{constructor(e,t,n,o=null,r=null){super(A(e,t),n,d.IStructNode,o,r),this.structure=t,this.name=e,this.update(!1)}update(e=!0){for(let t=0;t<this.structure.length;t++)this.structure[t].value.parent=this,[d.IFunctionNode,d.IBuiltInFunctionNode].includes(this.structure[t].value.nodeType)?this.methods[this.structure[t].name]=this.structure[t].value:this.properties[this.structure[t].name]=()=>this.structure[t].value;if(e){this.value=A(this.name,this.structure);let e=this.parent;while(null!==e)e.update(),e=e.parent}}}class m{constructor(e,t,n,o,s){this.returnType=e,this.name=t,this.args=n,this.type=r.Function,this.value=`<${t}>`,this.parent=null,this.position=o,this.context=s,this.properties={name:()=>new h(`"${this.name}"`,r.String,this.position,this.context)}}toString(){return this.value}}class E extends m{constructor(e,t,n,o,r=null,s=null){super(e,`fn ${t}`,n,r,s),this.body=o,this.nodeType=d.IFunctionNode}}class I extends m{constructor(e,t,n,o){super(e,`built-in ${t}`,n),this.execute=o,this.nodeType=d.IBuiltInFunctionNode}static getArg(e,t){return t.filter((t=>t.name===e))[0].value}}class g{constructor(e,t=null,n=null){this.nodes=e,this.position=t,this.context=n,this.nodeType=d.IMultiResultNode}toString(){return`<INode ${this.nodeType}>`}}class x{constructor(e,t=!1,n=!1){this.nodeToControl=e,this.continue=t,this.break=n,this.nodeType=d.IForceControlNode}toString(){return`<INode ${this.nodeType}>`}}class w{constructor(e,t,n=null,o=null){this.value=e,this.nodeToReturnValueTo=t,this.position=n,this.context=o,this.nodeType=d.IReturnNode}}function b(e){let t="[ ";for(let n=0;n<e.length;n++)t+=e[n].value,n<e.length-1&&(t+=", ");return t+" ]"}function R(e){let t="{ ";for(let n=0;n<e.length;n++)t+=e[n],n<e.length-1&&(t+=", ");return t+" }"}function S(e,t){let n="";for(let o=0;o<t.length;o++)t[o].type.nodeType===d.IBaseStructNode?n+=`${t[o].name}: ${S(t[o].type.name,t[o].type.structure)}`:n+=`${t[o].name}: ${t[o].type}`,o<t.length-1&&(n+=", ");return`${e} { ${n} }`}function A(e,t){let n="";for(let o=0;o<t.length;o++)t[o].value.nodeType===d.IBaseStructNode?n+=`${t[o].name}: ${S(t[o].value.name,t[o].value.structure)}`:n+=`${t[o].name}: ${t[o].value.value}`,o<t.length-1&&(n+=", ");return`${e} { ${n} }`}e.exports={INode:d,INumberNode:p,IStringNode:h,IBooleanNode:y,IArrayNode:k,IEnumNode:f,IEnumValueNode:T,IBaseStructNode:N,IStructNode:v,IFunctionNode:E,IBuiltInFunctionNode:I,IMultiResultNode:g,IForceControlNode:x,IReturnNode:w}},9665:function(e,t,n){const{IBooleanNode:o}=n(4667),{dataTypes:r}=n(5147),{toBoolean:s}=n(914);function i(e,t,n){return void 0===u[n]?null:u[n](e,t)}const u={eq:function(e,t){if(e.nodeType===t.nodeType)return new o(s(e.value)===s(t.value)?"True":"False",r.Bool,e.position,e.context)},neq:function(e,t){if(e.nodeType===t.nodeType)return new o(s(e.value)!==s(t.value)?"True":"False",r.Bool,e.position,e.context)},lt:function(e,t){if(e.nodeType===t.nodeType)return new o(s(e.value)<s(t.value)?"True":"False",r.Bool,e.position,e.context)},lte:function(e,t){if(e.nodeType===t.nodeType)return new o(s(e.value)<=s(t.value)?"True":"False",r.Bool,e.position,e.context)},gt:function(e,t){if(e.nodeType===t.nodeType)return new o(s(e.value)>s(t.value)?"True":"False",r.Bool,e.position,e.context)},gte:function(e,t){if(e.nodeType===t.nodeType)return new o(s(e.value)>=s(t.value)?"True":"False",r.Bool,e.position,e.context)},and:function(e,t){if(e.nodeType===t.nodeType)return new o(s(e.value)&&s(t.value)?"True":"False",r.Bool,e.position,e.context)},or:function(e,t){if(e.nodeType===t.nodeType)return new o(s(e.value)||s(t.value)?"True":"False",r.Bool,e.position,e.context)},not:function(e){return new o(s(e.value)?"False":"True",r.Bool,e.position,e.context)},assign:function(e,t){if(e.nodeType===t.nodeType)return t}};e.exports=i},8684:function(e,t,n){n(7658);const{Error:o}=n(6044),{isError:r,toBoolean:s,Context:i,SymbolTable:u}=n(914),{INumberNode:l,IStringNode:a,IBooleanNode:c,IArrayNode:d,IEnumNode:p,IBaseStructNode:h,IStructNode:y,IMultiResultNode:k,IForceControlNode:f,IFunctionNode:T,IReturnNode:N,INode:v}=n(4667),{Node:m}=n(5373),E=n(9665),{dataTypes:I,assignmentOperators:g}=n(5147);function x(e){return"int"===e||"INT"===e?I.Number:"fn"===e?I.Function:e.toUpperCase()}function w(e,t){let n={type:I.Number,value:new l(0,I.Number,null,t.context)};return t.returnType===I.Null&&t.nodeType===v.IBuiltInFunctionNode?n:e.nodeType!==v.IMultiResultNode&&t.returnType===I.Null?new o(t.position,o.RuntimeError,"No return value expected",t.context):e.nodeType===v.IMultiResultNode&&t.returnType!==I.Null?new o(t.position,o.RuntimeError,"Expected return value",t.context):void 0!==e.error?e:(e.nodeType===v.IReturnNode?(n.value=e.value.type===I.EnumValue?e.value.wrap():e.value,n.type=n.value.type):e.nodeType!==v.IMultiResultNode&&(n.value=e,n.type=e.type),n)}e.exports=class{visit(e,t){if(null===e||void 0===this[e.nodeType])return new o(void 0,o.RuntimeError,`<Node: ${void 0===e||null===e?e:e.nodeType}> was not expected`,t);const n=this[e.nodeType].bind(this);return n(e,t)}Error(e,t){return e.context=t,e}StatementsNode(e,t){let n=[];for(let o=0;o<e.nodes.length;o++){const s=this.visit(e.nodes[o],t);if(null!==s&&void 0!==s.error)return s;if(t.shouldReturn)return s;if(t.shouldContinue||t.shouldBreak)break;if(!r(s)&&s.nodeType===v.IForceControlNode){s.continue?s.nodeToControl.shouldContinue=!0:s.break&&(s.nodeToControl.shouldBreak=!0);break}if(!r(s)&&s.nodeType===v.IReturnNode)return s.nodeToReturnValueTo.shouldReturn=!0,s;null!==s&&n.push(s)}return new k(n,null,t)}NumberNode(e,t){return new l(e.token.value,e.token.type,e.token.position,t)}StringNode(e,t){return new a(e.token.value,e.token.type,e.token.position,t)}BooleanNode(e,t){return new c(e.token.value,e.token.type,e.token.position,t)}BaseStructNode(e,t){let n=[];const s=e.name.value;for(let i=0;i<e.structure.length;i++){const s=e.structure[i].identifier.value,u=e.structure[i].dataType,l=e.structure[i].writable;if(u.nodeType!==m.VariableAccessNode)n.push({name:s,type:u.value,writable:l});else{const e=this.visit(u,t);if(r(e))return e;if(e.nodeType!==v.IBaseStructNode)return new o(e.position,o.RuntimeError,`Received non-struct type for identifier: "${s}" in struct`,t);n.push({name:s,type:e,writable:l})}}return new h(s,n,I.Struct,e.position,t)}StructNode(e,t){const n=this.visit(e.name,t);if(r(n))return n;if(n.nodeType!==v.IBaseStructNode)return new o(n.position,o.RuntimeError,`Can't instantiate node: ${n}`,t);if(n.structure.length!==e.args.length)return new o(e.position,o.RuntimeError,`Expected ${n.structure.length} arguments. Received ${e.args.length} arguments`,t);const s=this._processArgs(!0,e.args,n.structure,t);return r(s)?s:new y(n.name,s,I.Struct,e.position,t)}UnaryOpNode(e,t){let n=this.visit(e.token||e.node,t);return r(n)||("SUB"===e.operationToken.type?n=n.mul(new l(-1)):"NOT"===e.operationToken.type&&(n=E(n,null,e.operationToken.type.toLowerCase()))),n}BinOpNode(e,t){const n=this.visit(e.leftNode,t);if(r(n))return n;let s=e.operation,i=!1;if("dot"===s)return this._processDotExpression(n,e,t);const u=this.visit(e.rightNode,t);if(r(u))return u;g.includes(s)&&(s=s.replace("_eq",""),i=!0);let l=void 0===n[s]?E(n,u,s):n[s](u);if(r(l))return new o(e.operationToken.position,o.RuntimeError,`Can't do operations on type ${u.type} to ${n.type}`,t);if(i){if(void 0===e.leftIdentifierValue){const r=this._getPropertyName(e.leftNode);if(null===n.parent)return new o(e.operationToken.position,o.RuntimeError,`Can't assign to immutable property: "${r}"`,t);const s=n.parent.structure.filter((e=>e.name===r))[0];return s.writable?(s.value=u,n.parent.update(),null):new o(e.operationToken.position,o.RuntimeError,`Can't assign to immutable property: "${r}"`,t)}return t.symbolTable.update(e.leftIdentifierValue,l),null}return l}ArrayNode(e,t){let n=[];for(let o=0;o<e.elements.length;o++){const s=this.visit(e.elements[o],t);if(r(s))return s;n.push(s)}return new d(n,e.type,e.position,t)}EnumNode(e,t){return new p(e.elements,e.type,e.position,t)}VariableAssignNode(e,t){const n=e.name.value,s=e.name.position;let i=e.type.value;const u=this.visit(e.value,t);if(r(u))return u;if(u.nodeType===v.IStructNode){if(u.name!==i)return new o(s,o.RuntimeError,`Can't assign data type: "${u.name}" to "${i}"`,t);i=u.type}return x(i)!==u.type?new o(s,o.RuntimeError,`Can't assign type ${u.type} to ${i.toUpperCase()}`,t):t.symbolTable.set(n,u)?null:new o(s,o.RuntimeError,`Variable "${n}" is already defined`,t)}VariableAccessNode(e,t){const n=e.name.value;let r=t.symbolTable.get(n);return void 0===r?new o(e.name.position,o.RuntimeError,`Variable "${n}" is not defined`,t):this._processIndexes(r,e.indexes,e.name.position,t)}CallNode(e,t){let n=this.visit(e.nodeToCall,t);if(r(n))return n;if(n.nodeType!==v.IFunctionNode&&n.nodeType!==v.IBuiltInFunctionNode)return new o(e.nodeToCall.name.position,o.RuntimeError,`${n} is not a function`,t);if(null===n.body)return null;if(n.context=new i(n.value,new u(t.symbolTable),t,!1,!0),e.args.length!==n.args.length)return new o(e.nodeToCall.name.position,o.RuntimeError,`Expected ${n.args.length} arguments. Received ${e.args.length} arguments`,t);const s=n.nodeType===v.IBuiltInFunctionNode;let l,a=this._processArgs(s,e.args,n.args,t,n);return r(a)?a:(s?(n.context.parent=t,l=w(n.execute(a,n.context),n)):l=w(this.visit(n.body,n.context),n),r(l)?l:r(l.value)?l.value:l.type!==n.returnType&&n.returnType!==I.Null?new o(e.nodeToCall.name.position,o.TypeError,`Expected return type: ${n.returnType}. Received: ${l.type}`,n.context):l.value)}FunctionNode(e,t){const n=e.name.value,r=x(e.returnType.value),s=[];for(let o=0;o<e.args.length;o++)s.push({type:x(e.args[o].type.value||e.args[o].type),name:e.args[o].name.value});const l=new T(r,n,s,e.body,e.name.position);return l.context=new i(l.value,new u(t.symbolTable),t,!1,!0),t.symbolTable.set(n,l)?null:new o(e.name.position,o.RuntimeError,`Function ${n}() is already defined`,t)}ContinueNode(e,t){const n=t.isForceControllable();return null===n?new o(e.position,o.InvalidSyntaxError,"Illegal continue statement",t):new f(n,!0,!1)}BreakNode(e,t){const n=t.isForceControllable();return null===n?new o(e.position,o.InvalidSyntaxError,"Illegal break statement",t):new f(n,!1,!0)}ReturnNode(e,t){const n=t.isReturnable();if(null===n)return new o(e.position,o.InvalidSyntaxError,"Illegal return statement",t);const r=this.visit(e.nodeToReturn,t);return new N(r,n,e.position,t)}IfNode(e,t){const n=new i("<IfNode>",new u(t.symbolTable),t);for(let o=0;o<e.cases.length;o++){const t=this.visit(e.cases[o].condition,n);if(r(t))return t;if(s(t.value))return this.visit(e.cases[o].expr,n)}return null!==e.elseCase?this.visit(e.elseCase,n):null}WhileNode(e,t){const n=new i("<WhileNode>",new u(t.symbolTable),t,!0);if(null===e.body)return null;let o=this.visit(e.condition,n);if(r(o))return o;let l=[];while(s(o.value)){n.symbolTable.clear();const t=this.visit(e.body,n);if(r(t))return t;if(t.nodeType===v.IReturnNode)return t;if(l.push(t),n.shouldContinue)n.shouldContinue=!1;else if(n.shouldBreak)break;o=this.visit(e.condition,n)}return new k(l,null,t)}ForNode(e,t){const n=new i("<ForNode>",new u(t.symbolTable),t,!0);if(null===e.body)return null;let s={start:0,end:0,step:1,value:null};if(Array.isArray(e.controls)){let i=[];for(let s=0;s<e.controls.length;s++){const u=this.visit(e.controls[s],t);if(r(u))return u;if(u.type!==I.Number)return new o(u.position,o.RuntimeError,`Expected type ${I.Number}. Received: ${u.type}`,n);i.push(u)}s.start=i[0].value,s.end=i[1].value,s.step=i[2].value}else{const t=this.visit(e.controls,n);if(r(t))return t;if(s.end=t.elements?t.elements.length:t.value,s.value=t.elements?t.elements:null,isNaN(s.end))return new o(t.position,o.RuntimeError,`Can't loop through type: ${t.type}`,n)}const a=e.variableName.value;let c=new l(s.start,I.Number,e.variableName.position,n),d=!0;if(!n.symbolTable.set(a,null===s.value?new l(c.value,c.type,c.position,n):s.value[c.value]))return new o(e.variableName.position,o.RuntimeError,`Variable '${a}' already exists`,n);let p=[];while(d){(s.step>=0&&c.value>=s.end-s.step||s.step<0&&c.value<=s.end-s.step)&&(d=!1);const t=this.visit(e.body,n);if(null!==t){if(r(t))return t;if(t.nodeType===v.IReturnNode)return t;if(p.push(t),n.shouldContinue)n.shouldContinue=!1;else if(n.shouldBreak)break;c.value+=s.step,n.symbolTable.clear(),n.symbolTable.update(a,null===s.value?new l(c.value,c.type,c.position,n):s.value[c.value])}else c.value+=s.step,n.symbolTable.clear(),n.symbolTable.update(a,null===s.value?new l(c.value,c.type,c.position,n):s.value[c.value])}return 0===p.length?null:new k(p,null,t)}_processDotExpression(e,t,n,s=!0){const l=s?t.rightNode:t.leftNode;if(l.nodeType===m.BinOpNode){const t=this._processDotExpression(e,l,n,!1);return this._processDotExpression(t,l,n,!0)}if(l.nodeType===m.CallNode){if(void 0===e.methods[l.functionName])return new o(t.operationToken.position,o.RuntimeError,`${e} doesn't contain method: "${l.functionName}()"`,n);const s=l.args,a=e.methods[l.functionName].args;if(s.length!==a.length)return new o(l.nodeToCall.name.position,o.RuntimeError,`Expected ${a.length} arguments. Received ${s.length} arguments`,n);const c=e.methods[l.functionName].nodeType!==v.IFunctionNode,d=e.methods[l.functionName];d.context=new i(d.value,new u(n.symbolTable),n,!1,!0);const p=this._processArgs(c,s,a,d.context,e.methods[l.functionName]);if(r(p))return p;let h;return c&&p.push({name:"value",value:e}),h=w(c?d.execute(p,d.context):this.visit(d.body,d.context),d),r(h)?h:r(h.value)?h.value:h.type!==d.returnType&&d.returnType!==I.Null?new o(e.position,o.TypeError,`Expected return type: ${d.returnType}. Received: ${h.type}`,d.context):h.value}const a=s?t.rightIdentifierValue:t.leftIdentifierValue,c=s?t.rightIdentifierIndexes:t.leftIdentifierIndexes;if(e.type===I.Enum){const r=e.elements.filter((e=>e.value===a))[0];return void 0!==r?r:new o(t.operationToken.position,o.RuntimeError,`${e} doesn't contain value: "${a}"`,n)}return Object.keys(e.properties).includes(a)?this._processIndexes(e.properties[a](),c,t.operationToken.position,n):new o(t.operationToken.position,o.RuntimeError,`${e} doesn't contain property: "${a}"`,n)}_processArgs(e,t,n,s,i=null){let u=[];for(let l=0;l<t.length;l++){let a=this.visit(t[l],s);if(r(a))return a;a.type===I.EnumValue&&(a=a.wrap());const c=x(n[l].type.nodeType===v.IBaseStructNode?n[l].type.type:n[l].type);if(c!==a.type&&c!==I.Any)return new o(a.position,o.RuntimeError,`Expected type: ${c}. Received: ${a.type}`,null===i?s:i.context);if(!e&&null!==i&&!i.context.symbolTable.set(n[l].name,a))return console.log(e,i,s),new o(a.position,o.RuntimeError,`Argument name: "${n[l].name}" is already taken`);{const e={name:n[l].name,value:a};void 0!==n[l].writable&&(e.writable=n[l].writable),u.push(e)}}return!e||u}_getPropertyName(e){return e.nodeType===m.BinOpNode?this._getPropertyName(e.rightNode):e.nodeType===m.VariableAccessNode?e.name.value:e.functionName}_processIndexes(e,t,n,s){if(t.length>0&&![I.Array,I.Enum,I.String].includes(e.type))return new o(n,o.RuntimeError,`Data type: ${e.type} is not indexable`,s);for(let i=0;i<t.length;i++){const u=this.visit(t[i],s);if(r(u))return u;if(u.nodeType!==v.INumberNode)return new o(n,o.RuntimeError,`Unexpected type received for index: ${u}`,s);if(e=void 0===e.elements?e.index(u.value):e.elements[u.value],void 0===e)return new o(n,o.IndexOutOfBoundsError,`Index out of bounds: ${u.value}`,s)}return e}}},404:function(e,t,n){const{Context:o,SymbolTable:r,APICaller:s}=n(914),{NumberType:i,StringType:u,Print:l,Clear:a,IsArray:c,IsNumber:d,IsString:p,IsEnum:h,IsBoolean:y,IsFunction:k,Typeof:f,getMath:T}=n(6364);e.exports=function(){const e=new o("<Global>",new r);return e.apiCaller=new s,e.symbolTable.set("Number",i()),e.symbolTable.set("String",u()),e.symbolTable.set("Print",l()),e.symbolTable.set("Clear",a()),e.symbolTable.set("IsArray",c()),e.symbolTable.set("IsNumber",d()),e.symbolTable.set("IsString",p()),e.symbolTable.set("IsEnum",h()),e.symbolTable.set("IsBoolean",y()),e.symbolTable.set("IsFunction",k()),e.symbolTable.set("Typeof",f()),e.symbolTable.set("Math",T()),e}},2303:function(e,t,n){n(541),n(7658);const o=n(5147).lexerRules,{Token:r,TokenStream:s,Position:i,getString:u}=n(914),{Error:l}=n(6044);e.exports=function(e){if("string"!==typeof e||0===e.length)return new s([]);const t=e.split("\n");let n=[];for(let s=0;s<t.length;s++){const e=t[s].replace(/\r|\t|\n|\r\n/gm,""),a=e.split(/([(-)]|[{-}]|\[|\]|\/\/|\+=|-=|\*=|\/=|\^=|\+|-|\*|\/|\^|<=|>=|[<>]|&|~|!=|!|,|"|\.|:)| /g).filter((e=>void 0!==e&&""!==e));a.unshift("\n");let c=0,d=!1;if("//"!==a[1])for(let t=0;t<a.length;t++){const p=a[t],h=e.indexOf(p,c),y=new i(t,s,-1===h?0:h);if(c=y.char,!d||'"'===p)if(d&&'"'===p)d=!1,c++;else if('"'!==p){for(let e=0;e<o.length;e++)if(o[e][1].test(p)){n.push(new r(o[e][0],p,y));break}}else{const t=u(e,c);if(null!==t.error)return new l(y,l.InvalidSyntaxError,t.error);n.push(new r("STRING",t.value,y)),d=!0}}}const a=n[n.length-1];let c=void 0===a?new i(0,0,0):a.position;return void 0!==a&&(c.index+=1,c.char+=a.value.length),new s(n.concat(new r("EOF","EOF",c)))}},5373:function(e,t,n){var o=n(4344)["default"];class r{constructor(e){this.nodeType=e}toString(){return`<Node ${this.nodeType}>`}}o(r,"StatementsNode","StatementsNode"),o(r,"NumberNode","NumberNode"),o(r,"UnaryOpNode","UnaryOpNode"),o(r,"BinOpNode","BinOpNode"),o(r,"ArrayNode","ArrayNode"),o(r,"EnumNode","EnumNode"),o(r,"BaseStructNode","BaseStructNode"),o(r,"StructNode","StructNode"),o(r,"VariableAssignNode","VariableAssignNode"),o(r,"VariableAccessNode","VariableAccessNode"),o(r,"IfNode","IfNode"),o(r,"ForNode","ForNode"),o(r,"WhileNode","WhileNode"),o(r,"CallNode","CallNode"),o(r,"FunctionNode","FunctionNode"),o(r,"ReturnNode","ReturnNode"),o(r,"BreakNode","BreakNode"),o(r,"ContinueNode","ContinueNode");class s extends r{constructor(e){super("StatementsNode"),this.nodes=e}}class i extends r{constructor(e){super("NumberNode"),this.token=e}}class u extends r{constructor(e,t){super("UnaryOpNode"),this.operationToken=e,this.node=t}}class l extends r{constructor(e,t,n){super("BinOpNode"),this.leftNode=e,this.operationToken=t,this.rightNode=n}get operation(){return this.operationToken.type.toLowerCase()}get leftIdentifierValue(){return this.leftNode.name?.value}get leftIdentifierIndexes(){return this.leftNode.indexes}get rightIdentifierValue(){return this.rightNode.name?.value}get rightIdentifierIndexes(){return this.rightNode.indexes}}class a extends r{constructor(e){super("StringNode"),this.token=e}}class c extends r{constructor(e){super("BooleanNode"),this.token=e}}class d extends r{constructor(e,t,n){super("ArrayNode"),this.elements=e,this.type=t,this.position=n}}class p extends r{constructor(e,t,n){super("EnumNode"),this.elements=e,this.type=t,this.position=n}}class h extends r{constructor(e,t,n){super("BaseStructNode"),this.name=e,this.structure=t,this.position=n}}class y extends r{constructor(e,t,n){super("StructNode"),this.name=e,this.args=t,this.position=n}}class k extends r{constructor(e,t,n){super("VariableAssignNode"),this.name=e,this.value=t,this.type=n}}class f extends r{constructor(e,t=[]){super("VariableAccessNode"),this.name=e,this.indexes=t}}class T extends r{constructor(e,t){super("IfNode"),this.cases=e,this.elseCase=t}}class N extends r{constructor(e,t,n){super("ForNode"),this.variableName=e,this.controls=t,this.body=n}}class v extends r{constructor(e,t){super("WhileNode"),this.condition=e,this.body=t}}class m extends r{constructor(e,t){super("CallNode"),this.nodeToCall=e,this.args=t}get functionName(){return this.nodeToCall.name.value}}class E extends r{constructor(e,t,n,o){super("FunctionNode"),this.returnType=e,this.name=t,this.args=n,this.body=o}}class I extends r{constructor(e,t){super("ReturnNode"),this.nodeToReturn=e,this.position=t}}class g extends r{constructor(e){super("BreakNode"),this.position=e}}class x extends r{constructor(e){super("ContinueNode"),this.position=e}}e.exports={Node:r,StatementsNode:s,NumberNode:i,BinOpNode:l,UnaryOpNode:u,StringNode:a,BooleanNode:c,ArrayNode:d,EnumNode:p,BaseStructNode:h,StructNode:y,VariableAssignNode:k,VariableAccessNode:f,IfNode:T,ForNode:N,WhileNode:v,CallNode:m,FunctionNode:E,ReturnNode:I,BreakNode:g,ContinueNode:x}},5992:function(e,t,n){n(7658);const{Error:o}=n(6044),{isError:r}=n(914),{dataTypes:s,tokenTypes:i}=n(5147),{Node:u,StatementsNode:l,NumberNode:a,BinOpNode:c,UnaryOpNode:d,StringNode:p,BooleanNode:h,VariableAccessNode:y,VariableAssignNode:k,IfNode:f,ArrayNode:T,EnumNode:N,BaseStructNode:v,StructNode:m,ForNode:E,WhileNode:I,CallNode:g,FunctionNode:x,ReturnNode:w,BreakNode:b,ContinueNode:R}=n(5373);e.exports=class{constructor(e){this.tokens=e}parse(){return this.statements(!1)}statements(e){let t=[];while(this.tokens.currentToken.type!==i.EOF){while(this.tokens.currentToken.type===i.NEWLINE)this.tokens.advance();if(e&&this.tokens.currentToken.type===i.RBRACKET)break;const n=this.statement();if(t.push(n),r(n))break}return new l(t)}statement(){const e=this.tokens.currentToken.position;if(this.tokens.currentToken.matches(i.KEYWORD,"return")){this.tokens.advance();const t=this.expr();return r(t)?t:new w(t,e)}return this.tokens.currentToken.matches(i.KEYWORD,"break")?(this.tokens.advance(),new b(e)):this.tokens.currentToken.matches(i.KEYWORD,"continue")?(this.tokens.advance(),new R(e)):this.expr()}expr(){if(this.tokens.currentToken.type===i.TYPE){const e=this.tokens.currentToken,t=e.value.toUpperCase()===s.Struct;this.tokens.advance();const n=this.tokens.currentToken;if(this.tokens.currentToken.type!==i.IDENTIFIER)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected identifier after type declaration");if(this.tokens.advance(),!t){if(this.tokens.currentToken.type!==i.ASSIGN)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected assignment after identifier declaration");this.tokens.advance()}let u=t?this.structExpr(n):this.expr();return r(u)?u:new k(n,u,e)}if(this.tokens.currentToken.type===i.IDENTIFIER){const e=this.checkInitStruct();if(null!==e)return e}return this.binOp(this.compExpr.bind(this),[i.OR,i.AND])}compExpr(){if(this.tokens.currentToken.type===i.NOT){const e=this.tokens.currentToken;this.tokens.advance();const t=this.compExpr();return r(t)?t:new d(e,t)}return this.binOp(this.assignmentExpr.bind(this),[i.EQ,i.NEQ,i.GT,i.GTE,i.LT,i.LTE])}assignmentExpr(){return this.binOp(this.arithExpr.bind(this),[i.ADD_EQ,i.SUB_EQ,i.MUL_EQ,i.DIV_EQ,i.MOD_EQ,i.ASSIGN])}arithExpr(){return this.binOp(this.term.bind(this),[i.ADD,i.SUB])}term(){return this.binOp(this.factor.bind(this),[i.MUL,i.DIV,i.MOD])}factor(){const e=this.tokens.currentToken;if(null!==e){if([i.SUB,i.ADD,i.NOT].includes(e.type)){this.tokens.advance();const t=this.factor();return r(t)?t:new d(e,t)}return this.power()}}power(){return this.binOp(this.dot.bind(this),[i.POW],this.factor.bind(this))}dot(){let e=this.call();const t=this.tokens.currentToken;if(t.type===i.DOT){this.tokens.advance();const n=this.dot();if(r(n))return n;if(e.nodeType!==u.NumberNode||n.nodeType!==u.NumberNode)return new c(e,t,n);e.token.value=`${e.token.value}.${n.token.value}`}return e}call(){const e=this.atom();if(this.tokens.currentToken.type===i.LPAR){const t=this.getArgs();return r(t)?t:(this.tokens.advance(),new g(e,t))}return e}atom(){const e=this.tokens.currentToken;if(this.tokens.advance(),null===e)return null;if(e.type===s.Number)return new a(e);if(e.type===s.String)return new p(e);if(e.type===s.Bool)return new h(e);if(e.type===i.IDENTIFIER){const t=this.getIndexedValue(!0,null);return r(t)?t:new y(e,t)}if(e.type===i.LPAR){const e=this.expr();return r(e)?e:this.tokens.currentToken.type!==i.RPAR?new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected ')'"):(this.tokens.advance(),e)}return e.type===i.LBRACKET?this.enumExpr():e.type===i.LSQUARE?this.arrayExpr():e.matches(i.KEYWORD,"fn")?this.functionExpr():e.matches(i.KEYWORD,"if")?this.ifExpr():e.matches(i.KEYWORD,"for")?this.forExpr():e.matches(i.KEYWORD,"while")?this.whileExpr():e.matches(i.KEYWORD,"new")?this.initStructExpr():new o(e.position,o.InvalidSyntaxError,`Unexpected token: ${e.toString()}`)}binOp(e,t,n=null){null===n&&(n=e);let o=e();if(r(o,this.tokens.currentToken))return o;while(null!==this.tokens.currentToken.type&&t.includes(this.tokens.currentToken.type)){const e=this.tokens.currentToken;this.tokens.advance();const t=n();if(r(t))return t;o=new c(o,e,t)}return o}functionExpr(){const e=this.tokens.currentToken;if(e.type!==i.IDENTIFIER)return new o(e.position,o.InvalidSyntaxError,"Expected function name after function initization");this.tokens.advance();const t=this.getFunctionArgs();if(r(t))return t;if(this.tokens.advance(),this.tokens.currentToken.type!==i.COLON)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected colon (:) after arguments");this.tokens.advance();const n=this.tokens.currentToken;if(n.type!==i.TYPE&&!n.matches(i.IDENTIFIER,"null"))return new o(n.position,o.InvalidSyntaxError,"Expected function type");if(this.tokens.advance(),this.tokens.currentToken.type!==i.LBRACKET)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '{'");this.tokens.advance();let s=null;return this.tokens.currentToken.type!==i.RBRACKET&&(s=this.statements(!0)),null!==s&&r(s)?s:this.tokens.currentToken.type!==i.RBRACKET?new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '}'"):(this.tokens.advance(),new x(n,e,t,s))}whileExpr(){if(this.tokens.currentToken.type!==i.LPAR)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '('");const e=this.expr();if(r(e))return e;if(this.tokens.currentToken.type!==i.LBRACKET)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '{'");this.tokens.advance();let t=null;return this.tokens.currentToken.type!==i.RBRACKET&&(t=this.statements(!0)),null!==t&&r(t)?t:this.tokens.currentToken.type!==i.RBRACKET?new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '}'"):(this.tokens.advance(),new I(e,t))}forExpr(){if(this.tokens.currentToken.type!==i.LPAR)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '('");if(this.tokens.advance(),this.tokens.currentToken.type!==i.IDENTIFIER)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected identifier");const e=this.tokens.currentToken;if(this.tokens.advance(),this.tokens.currentToken.type!==i.KEYWORD&&"in"!==this.tokens.currentToken.value)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected identifier");this.tokens.advance();const t=this.tokens.currentToken.type,n=Object.values(s).includes(t)||t===i.IDENTIFIER||t===i.LSQUARE||t===i.LBRACKET,u=n?this.expr():this.getArgs();if(r(u))return u;if(!n&&3!==u.length)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected 3 arguments");if(!n&&this.tokens.currentToken.type!==i.RPAR)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected ')'");if(this.tokens.advance(),this.tokens.currentToken.type!==i.LBRACKET)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '{'");this.tokens.advance();let l=null;return this.tokens.currentToken.type!==i.RBRACKET&&(l=this.statements(!0)),null!==l&&r(l)?l:this.tokens.currentToken.type!==i.RBRACKET?new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '}'"):(this.tokens.advance(),new E(e,u,l))}ifExpr(){let e=[],t=null;if(this.tokens.currentToken.type!==i.LPAR)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '('");const n=this.expr();if(r(n))return n;if(this.tokens.currentToken.type!==i.LBRACKET)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '{'");this.tokens.advance();const s=this.statements(!0);if(r(s))return s;if(this.tokens.currentToken.type!==i.RBRACKET)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '}'");this.tokens.advance(),e.push({condition:n,expr:s});while(this.tokens.currentToken.matches(i.KEYWORD,"elif")){if(this.tokens.advance(),this.tokens.currentToken.type!==i.LPAR)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '('");const t=this.expr();if(r(t))return t;if(this.tokens.currentToken.type!==i.LBRACKET)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '{'");this.tokens.advance();const n=this.statements(!0);if(r(n))return n;if(this.tokens.currentToken.type!==i.RBRACKET)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '}'");this.tokens.advance(),e.push({condition:t,expr:n})}if(this.tokens.currentToken.matches(i.KEYWORD,"else")){if(this.tokens.advance(),this.tokens.currentToken.type!==i.LBRACKET)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '{'");if(this.tokens.advance(),t=this.statements(!0),r(t))return t;if(this.tokens.currentToken.type!==i.RBRACKET)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '}'");this.tokens.advance()}return new f(e,t)}arrayExpr(){let e=[];const t=this.tokens.currentToken.position;if(this.tokens.currentToken.type===i.RSQUARE)this.tokens.advance();else{while(this.tokens.currentToken.type!==i.RSQUARE&&this.tokens.currentToken.type!==i.EOF){const t=this.expr();if(r(t))return t;if(e.push(t),this.tokens.currentToken.type===i.COMMA)this.tokens.advance();else if(this.tokens.currentToken.type!==i.RSQUARE)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected ']' or ','")}if(this.tokens.currentToken.type!==i.RSQUARE)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected ']'");this.tokens.advance()}const n=new T(e,s.Array,t),u=this.getIndexedValue(!1,n);return null===u?n:u}enumExpr(){let e=[];const t=this.tokens.currentToken.position;while(this.tokens.currentToken.type!==i.RBRACKET){if(this.tokens.currentToken.type!==i.IDENTIFIER)return Object.values(s).includes(this.tokens.currentToken.type)?new o(this.tokens.currentToken.position,o.TypeError,`Expected type identifier, not type: ${this.tokens.currentToken.type}`):new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '}' or ','");e.push(this.tokens.currentToken.value),this.tokens.advance(),this.tokens.currentToken.type===i.COMMA&&this.tokens.advance()}return this.tokens.currentToken.type!==i.RBRACKET?new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '}'"):(this.tokens.advance(),new N(e,s.Enum,t))}structExpr(e){const t=this.tokens.currentToken.position;if(this.tokens.currentToken.type!==i.LBRACKET)return new o(t,o.InvalidSyntaxError,"Expected '{'");this.tokens.advance();let n=[];while(this.tokens.currentToken.type!==i.RBRACKET){let e=!1;this.tokens.currentToken.type===i.NOT&&(e=!0,this.tokens.advance());const t=this.tokens.currentToken;if(t.type!==i.IDENTIFIER)return new o(t.position,o.TypeError,"Expected identifier");if(this.tokens.advance(),this.tokens.currentToken.type!==i.COLON)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected colon");this.tokens.advance();let r=this.tokens.currentToken;if(r.type!==i.TYPE&&r.type!==i.IDENTIFIER&&!r.matches(i.KEYWORD,"fn"))return new o(r.position,o.TypeError,"Expected data type, function, or struct");if(r.type===i.IDENTIFIER&&(r=new y(r)),n.push({identifier:t,dataType:r,writable:e}),this.tokens.advance(),this.tokens.currentToken.type===i.COMMA)this.tokens.advance();else if(this.tokens.currentToken.type!==i.RBRACKET)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '}' or ','")}return this.tokens.advance(),new v(e,n,t)}initStructExpr(){let e=this.tokens.currentToken;const t=e.position;if(e.type!==i.IDENTIFIER)return new o(e.position,o.InvalidSyntaxError,"Expected identifier");e=new y(e),this.tokens.advance();const n=this.getArgs();return this.tokens.advance(),new m(e,n,t)}getIndexedValue(e,t){let n=[],s=null;while(this.tokens.currentToken.type===i.LSQUARE){this.tokens.advance();const e=this.expr();if(r(e))return e;if(n.push(e),this.tokens.currentToken.type!==i.RSQUARE)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected ']'");this.tokens.advance()}if(!e)for(let r=0;r<n.length;r++)if(s=null===s?t.elements[n[r]]:s.elements[n[r]],void 0===s)return new o(this.tokens.currentToken.position,o.IndexOutOfBoundsError,`Index out of bounds: ${n[r]}`);return e?n:s}getArgs(){let e=[];if(this.tokens.currentToken.type!==i.LPAR)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '('");this.tokens.advance();while(this.tokens.currentToken.type!==i.RPAR&&this.tokens.currentToken.type!==i.EOF){const t=this.expr();if(r(t))return t;e.push(t),this.tokens.currentToken.type===i.COMMA&&this.tokens.advance()}return e}getFunctionArgs(){let e=[];if(this.tokens.currentToken.type!==i.LPAR)return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected '('");this.tokens.advance();while(this.tokens.currentToken.type!==i.RPAR&&this.tokens.currentToken.type!==i.EOF){const t=this.tokens.currentToken;if(t.type!==i.IDENTIFIER)return new o(t.position,o.InvalidSyntaxError,`Expected identifer. Received: ${t.type}`);if(this.tokens.advance(),this.tokens.currentToken.type===i.COLON){this.tokens.advance();const n=this.tokens.currentToken;if(n.type!==i.TYPE)return new o(n.position,o.InvalidSyntaxError,`Expected data type. Recieved: ${n.type}`);e.push({type:n,name:t}),this.tokens.advance()}else{if(![i.COMMA,i.RPAR].includes(this.tokens.currentToken.type))return new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected ':' or ','");e.push({type:s.Any,name:t})}this.tokens.currentToken.type===i.COMMA&&this.tokens.advance()}return e}checkInitStruct(){this.tokens.anchor();const e=this.tokens.currentToken;this.tokens.advance();const t=this.tokens.currentToken;if(t.type!==i.IDENTIFIER)return this.tokens.anchor(),null;if(this.tokens.advance(),this.tokens.currentToken.type!==i.ASSIGN)return this.tokens.anchor(),new o(this.tokens.currentToken.position,o.InvalidSyntaxError,"Expected assignment after identifier declaration");this.tokens.anchor(!0),this.tokens.advance();const n=this.expr();return r(n)?n:new k(t,n,e)}}},914:function(e,t,n){n(7658);class o{constructor(e,t,n){this.index=e,this.line=t,this.char=n}toString(){return`Token ${this.index+1} [${this.line+1}:${this.char}]`}}class r{constructor(e,t,n){this.type=e,this.value=t,this.position=n}matches(e,t){return this.type===e&&this.value===t}toString(){return`<Token ${this.type}: ${"\n"===this.value?"\\n":this.value}>`}}class s{constructor(e){this.tokens=e,this.index=-1,this.currentToken=this.noToken(),this.anchorData={anchored:!1},this.advance()}advance(){this.index++,this.currentToken=this.tokens[this.index]||this.noToken();while(null!==this.currentToken.type&&"NEWLINE"===this.currentToken.type)this.advance()}anchor(e=!1){this.anchorData.anchored?e||(this.index=this.anchorData.index,this.currentToken=this.anchorData.currentToken):(this.anchorData.index=this.index,this.anchorData.currentToken=this.currentToken),this.anchorData.anchored=!this.anchorData.anchored}noToken(){return new r("NO_TOKEN","INTERNAL_ERROR",new o(-1,-1,0))}}class i{constructor(){this.calls=[]}call(e,t){this.calls.push({value:e,type:t})}process(){for(let e=0;e<this.calls.length;e++)void 0!==this[this.calls[e].type]&&this[this.calls[e].type](this.calls[e]);this.calls.splice(0,this.calls.length)}print(e){console.log(`[Basp] ${e.value}`)}clear(){console.clear()}}class u{constructor(e,t=null,n=null,o=!1,r=!1){this.displayName=e,this.parent=n,this.allowForceControls=o,this.allowReturn=r,this.symbolTable=t,this.shouldContinue=!1,this.shouldBreak=!1,this.shouldReturn=!1,this.global=this._getGlobalContext()}isForceControllable(e=this){return e.allowForceControls?e:null!==e.parent?this.isForceControllable.bind(this)(e.parent):null}isReturnable(e=this){return e.allowReturn?e:null!==e.parent?this.isReturnable.bind(this)(e.parent):null}_getGlobalContext(e=this){return e.parent?this._getGlobalContext.bind(this)(e.parent):e}clone(){return new u(this.displayName,this.symbolTable,this.parent,this.allowForceControls,this.allowReturn)}}class l{constructor(e=null){this.symbols={},this.parent=e}get(e){const t=this.symbols.hasOwnProperty(e)?this.symbols[e]:void 0;return void 0===t&&null!==this.parent?this.parent.get(e):t}set(e,t){return!this.symbols.hasOwnProperty(e)&&(this.symbols[e]=t,!0)}update(e,t){if(void 0===this.symbols[e]&&null!==this.parent){const n=this.parent._find(e);if(void 0!==n){let o=this.parent;for(let e=0;e<n;e++)o=o.parent;o.symbols[e]=t}}this.symbols[e]=t}clear(){this.symbols={}}_find(e,t=0){const n=this.symbols[e];return void 0===n&&null!==this.parent?(t++,this.parent._find(e,t)):t}}function a(e){return!(void 0!==e&&null!==e&&void 0===e.error)}function c(e,t){let n={error:null,value:null};const o=e.indexOf('"',t+1);return n.value=e.slice(t,o+1),n}function d(e){return"True"===e||"False"!==e&&e}e.exports={Token:r,TokenStream:s,Position:o,Context:u,SymbolTable:l,APICaller:i,isError:a,getString:c,toBoolean:d}},5224:function(e,t,n){"use strict";var o=n(6369),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Header"),t("Hero"),t("Editor")],1)},s=[],i=function(){var e=this;e._self._c;return e._m(0)},u=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"header"},[t("h1",{staticClass:"header__title"},[e._v("Basp (Alpha)")])])}],l={},a=l,c=n(1001),d=(0,c.Z)(a,i,u,!1,null,null,null),p=d.exports,h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hero"})},y=[],k={},f=k,T=(0,c.Z)(f,h,y,!1,null,null,null),N=T.exports,v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editor"},[t("div",{staticClass:"editor__code"},[t("div",{staticClass:"editor__toolkit"},[t("button",{staticClass:"editor__toolkit__btn",on:{click:e.start}},[e._v("Run")]),t("button",{staticClass:"editor__toolkit__btn",on:{click:e.save}},[e._v("Save")])]),t("div",{staticClass:"editor__code__input",attrs:{name:"code",id:"code"}})]),t("div",{staticClass:"editor__divider"}),t("div",{staticClass:"editor__output"},[t("div",{staticClass:"editor__toolkit"},[t("button",{staticClass:"editor__toolkit__btn",on:{click:e.clearOutput}},[e._v("Clear Output")])]),t("div",{staticClass:"editor__output__log",attrs:{id:"output"}},e._l(e.output,(function(n){return t("pre",{key:n.id,class:" "===n.text?"editor__output__log__space":"editor__output__log__msg"},[e._v(e._s(n.text))])})),0)])])},m=[],E=(n(7658),n(1901)),I=n(9666),g=n(5266),x={name:"Editor",data(){return{editor:null,output:[]}},methods:{start(){this.run(),this.scrollElement(document.querySelector(".editor__output__log"))},run(){const e=n(2303),t=n(5992),o=n(8684),r=n(404),{isError:s}=n(914);this.save();const i=e(this.getCode());if(0===i.tokens.length)return this.log(null);if(s(i))return this.generateLog(i.toString());const u=new t(i),l=u.parse();for(let n=0;n<l.nodes.length;n++)if(s(l.nodes[n])&&void 0!==l.nodes[n]&&void 0!==l.nodes[n].error)return this.generateLog(l.nodes[n].toString());const a=new o,c=!1===l?null:a.visit(l,r());this.checkErrors(c,s),this.log(null)},checkErrors(e,t){if(t(e))return this.generateLog(e.toString()),null;if(null!==e.context&&this.processAPICaller(e.context.global.apiCaller),void 0===e.value)for(let n=0;n<e.nodes.length;n++)if(void 0===e.value&&null===this.checkErrors(e.nodes[n],t))return null},processAPICaller(e){const t={print:e=>this.log(e.value),clear:()=>this.clearOutput()};for(let n=0;n<e.calls.length;n++)void 0!==t[e.calls[n].type]&&t[e.calls[n].type](e.calls[n]);e.calls.splice(0,e.calls.length)},log(e){if(null===e)return this.generateLog("[Basp] Program Has Executed..."),void this.generateLog(" ");this.generateLog(`[Basp] ${e}`)},generateLog(e){this.output.push({text:e,id:this.output.length})},clearOutput(){this.output=[]},save(){localStorage.setItem("code",this.getCode())},getCode(){const e=this.editor.state.doc.children;if(null!==e){let t="";for(let n=0;n<e.length;n++)t+=e[n].text.join("\n");return t}return this.editor.state.doc.text.join("\n")},scrollElement(e){e.scroll({top:e.scrollHeight,behavior:"smooth"})}},mounted(){this.editor=new E.tk({doc:localStorage.getItem("code")||"\n".repeat(4),extensions:[I.Xy,E.$f.of([g.oc])],parent:document.querySelector("#code"),theme:"monokai"})}},w=x,b=(0,c.Z)(w,v,m,!1,null,null,null),R=b.exports,S={name:"Home",components:{Header:p,Hero:N,Editor:R}},A=S,C=(0,c.Z)(A,r,s,!1,null,null,null),B=C.exports;o.ZP.config.productionTip=!0,new o.ZP({render:e=>e(B)}).$mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,s){if(!o){var i=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],s=e[c][2];for(var u=!0,l=0;l<o.length;l++)(!1&s||i>=s)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(u=!1,s<i&&(i=s));if(u){e.splice(c--,1);var a=r();void 0!==a&&(t=a)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[o,r,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,s,i=o[0],u=o[1],l=o[2],a=0;if(i.some((function(t){return 0!==e[t]}))){for(r in u)n.o(u,r)&&(n.m[r]=u[r]);if(l)var c=l(n)}for(t&&t(o);a<i.length;a++)s=i[a],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},o=self["webpackChunkbasp"]=self["webpackChunkbasp"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5224)}));o=n.O(o)})();
//# sourceMappingURL=app.a355c848.js.map